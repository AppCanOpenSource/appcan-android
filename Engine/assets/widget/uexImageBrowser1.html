<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport"
	content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, user-scalable=no" />
<link rel="stylesheet" type="text/css" href="css/index.css">
<title>图片浏览功能</title>
<script type="text/javascript">
	window.uexOnload = function() {

		uexImageBrowser.cbPick = function(opCode, dataType, data) {
			document.getElementById('pickImage').innerHTML = data;
			document.getElementById('picc').src = data;
		}

		uexImageBrowser.cbSave = function(opCode, dataType, data) {
			if (data == 0) {
				alert("保存成功!");
			} else if (data == 1) {
				alert("保存失败!");
			}
		}

		uexWidgetOne.onError = function(opCode, errorCode, errorDesc) {
			alert(errorCode + ":" + errorDesc);
		}
	}

	function openImageGallery() {
		var array = new Array();
		for ( var i = 0; i < 22; i++) {
			array[i] = document.getElementById('imageUrl_' + i).value;
		}
		uexImageBrowser.open(array);//1.2版本后，应为3个参数
	}

	function openImageGalleryWithIndex() {
		var array = new Array();
		for ( var i = 0; i < 22; i++) {
			array[i] = document.getElementById('imageUrl_' + i).value;
		}
		uexImageBrowser.open(array, document.getElementById("saveImgSrc").value, 1);
	}

	function previewTinyImage() {
		var array = new Array();
		array[0] = document.getElementById('picc').src;
		alert(array[0]);
		uexImageBrowser.open(array);
	}

	function saveImg() {

		uexImageBrowser.save("res://pano_l.jpg");//"wgt://data/down/1284565196.jpg");//此参数应该为wgt://（或wgts://,file://）路径下的图片文件，不支持网络
	}
	
	function cleanCache(){
		alert("cleanCache");
		uexImageBrowser.cleanCache();
	}
</script>
</head>

<body>
	<div class="tit">图片浏览功能</div>
	<div class="conbor">
		<div class="consj">
			<span>1.从媒体库选择一张图片：</span> <input class="btn" type="button"
				value="选择图片" onclick="uexImageBrowser.pick();">
			<div class="tcxx" id="pickImage"></div>
			<div>
				<img id="picc" src="" style="width: 200px; height: 200px;"
					onclick="previewTinyImage()" />
			</div>
			<br> <span>2.在图片浏览器里面查看图片</span> <span class="consj">图片支持本地SDcard上的路径和网络上http的路径，本地的路径须安装好SDCARD，网络上的路径请打开WIFI。</span>
			<input class="textbox" type="text" id="imageUrl_0"
				value="wgt://data/down/1284565196.jpg">
			<input class="textbox" type="text" id="imageUrl_1"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/1.jpg">
			<input class="textbox" type="text" id="imageUrl_2"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/2.jpg">
			<input class="textbox" type="text" id="imageUrl_3"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/3.jpg">
			<input class="textbox" type="text" id="imageUrl_4"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/4.jpg">
			<input class="textbox" type="text" id="imageUrl_5"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/5.jpg">
			<input class="textbox" type="text" id="imageUrl_6"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/6.jpg">
			<input class="textbox" type="text" id="imageUrl_7"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/7.jpg">
			<input class="textbox" type="text" id="imageUrl_8"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/8.jpg">
			<input class="textbox" type="text" id="imageUrl_9"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/9.jpg">
			<input class="textbox" type="text" id="imageUrl_10"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/10.jpg">
			<input class="textbox" type="text" id="imageUrl_11"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/11.jpg">
			<input class="textbox" type="text" id="imageUrl_12"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/12.jpg">
			<input class="textbox" type="text" id="imageUrl_13"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/13.jpg">
			<input class="textbox" type="text" id="imageUrl_14"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/14.jpg">
			<input class="textbox" type="text" id="imageUrl_15"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/15.jpg">
			<input class="textbox" type="text" id="imageUrl_16"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/16.jpg">
			<input class="textbox" type="text" id="imageUrl_17"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/17.jpg">
			<input class="textbox" type="text" id="imageUrl_18"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/18.jpg">
			<input class="textbox" type="text" id="imageUrl_19"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/19.jpg">
			<input class="textbox" type="text" id="imageUrl_20"
				value="http://192.168.1.38:8080/bug/TestImageWatcher/20.jpg">
			<input class="textbox" type="text" id="imageUrl_21"
				value="http://te.3g2win.com/education/wp-content/uploads/2012/04/夕阳3.jpg">
			<input class="btn" type="button" value="打开图片浏览器"
				onclick="openImageGallery();"> <input class="btn"
				type="button" value="有索引打开" onclick="openImageGalleryWithIndex();">
			<input class="textbox" type="text" value="" id="saveImgSrc">
			<input class="btn" type="button" value="保存" onclick="saveImg();">
			<input class="btn" type="button" value="清除缓存" onclick="cleanCache();">
			<input class="btn" type="button" value="返回"
				onclick="uexWindow.back();">
		</div>
	</div>
</body>
</html>